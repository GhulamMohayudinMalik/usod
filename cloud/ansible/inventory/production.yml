# Ansible Inventory - Production Environment
# Update IP addresses after Terraform deployment

all:
  children:
    # AWS - Backend Service
    backend:
      hosts:
        aws-backend:
          ansible_host: 52.1.1.1  # CHANGE: Use output from terraform
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/usod-key
          ansible_python_interpreter: /usr/bin/python3
      vars:
        env: production
        service_name: backend
        service_port: 5000
        mongodb_uri: "mongodb+srv://username:password@cluster.mongodb.net/usod"  # CHANGE
        jwt_secret: "CHANGE_THIS_SECRET_KEY"  # CHANGE
        node_env: production

    # GCP - AI Service
    ai_service:
      hosts:
        gcp-ai:
          ansible_host: 34.1.1.1  # CHANGE: Use output from terraform
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/usod-key
          ansible_python_interpreter: /usr/bin/python3
      vars:
        env: production
        service_name: ai-service
        service_port: 8000
        backend_webhook_url: "http://52.1.1.1:5000/api/network/webhook"  # CHANGE

    # Azure - Blockchain Network
    blockchain:
      hosts:
        azure-blockchain:
          ansible_host: 20.1.1.1  # CHANGE: Use output from terraform
          ansible_user: azureuser
          ansible_ssh_private_key_file: ~/.ssh/usod-key
          ansible_python_interpreter: /usr/bin/python3
      vars:
        env: production
        service_name: blockchain
        orderer_port: 7050
        peer_port: 7051
        ca_port: 7054

    # Frontend (Can be deployed on any server, or use AWS)
    frontend:
      hosts:
        aws-frontend:
          ansible_host: 52.1.1.1  # CHANGE: Can be same as backend or separate
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/usod-key
          ansible_python_interpreter: /usr/bin/python3
      vars:
        env: production
        service_name: frontend
        service_port: 3000
        api_url: "http://52.1.1.1:5000"  # CHANGE
        next_public_api_url: "http://52.1.1.1:5000"  # CHANGE

  vars:
    ansible_connection: ssh
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'

